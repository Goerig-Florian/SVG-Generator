Florian G
fl0rian_g
En ligne

Ugo

 â€” Hier Ã  11:40
SSH_PRIVATE_KEY
-----BEGIN OPENSSH PRIVATE KEY-----
b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn
NhAAAAAwEAAQAAAYEAmvCFoFeavLU7aisl8SLQ6sPZ80OgJmtBWE1M2acWqseVfYgdlTXX
2FWigAHIIu9gWytAAypCOOLy172yIXL5erAuemV9Rz+QSAxH6RwJ6mRmi3XWwsL0AfXlMh
+1p7oGsA0JWkQRyxUABY0NmVjkfxg/HlZ0yN7PZfUfXIhIXD8MKZyR6mtPB3bkQLiwFLCJ
bmkOCNiOJEh4ij2JKqQfr0vK/8dG/dZTNPvHbLlhoE09abmagol84uWuMHgVNLio3jx17z
Afficher plus
-----BEGIN OPENSSH PRIVATE KEY-----.txt
3 Ko
Ugo
 a commencÃ© un appel qui a durÃ© 13 minutes. â€” Hier Ã  11:47
Florian G â€” Hier Ã  12:14
essai maintenant  j'ai rÃ©ussi par sms ðŸ˜‰
si tu veux et peux lol
Ugo

 â€” Hier Ã  16:35
Si tu viens de recevoir un sms de la part de github c'est moi je viens d'essayer de me connecter
Florian G â€” Hier Ã  17:17
Merde jai pas vu ton message dsl
941082 is your GitHub authentication code.
VoilÃ  le code reÃ§u
Ugo

 â€” Hier Ã  17:17
Pas grave attents si tu veux je refais
Normalement tu viens de nouveau de recevoir un sms avec un code 
Tu as reÃ§u le code ?
Florian G â€” Hier Ã  17:26
Yes
Image
Ugo

 â€” Hier Ã  17:27
super merci j'ai enfin rÃ©ussi Ã  y accÃ©der
Florian G â€” Hier Ã  17:27
Magnifique !
Enfin
Ugo

 â€” Hier Ã  17:28
tu as du en recevoir un nouveau c'est pour github desktop cette fois ci
Florian G â€” Hier Ã  17:28
Oui
977741 is your GitHub authentication code.
Ugo

 â€” Hier Ã  17:29
super merci
Florian G â€” Hier Ã  17:29
Merci a toi
Ugo

 â€” Hier Ã  17:53
Ã§a ne marche pas je crois tu vas Ãªtre condamnÃ© Ã  faire le code
Florian G â€” Hier Ã  17:57
Snif
Ugo

 â€” Hier Ã  17:59
en vrai il n' y en a pas pour longtemps
si tu veux je te guide Ã©tape par Ã©tape 
1Ã¨re Ã©tape : Ouvrir VSCode
2Ã¨me Ã©tape : Dans VSCode ouvrir un nouveau Terminal
3Ã¨me Ã©tape : mettre la commande : git clone https://github.com/Goerig-Florian/SVG-Generator.git 
GitHub
GitHub - Goerig-Florian/SVG-Generator
Contribute to Goerig-Florian/SVG-Generator development by creating an account on GitHub.
Contribute to Goerig-Florian/SVG-Generator development by creating an account on GitHub.
4Ã¨me Ã©tape : Ouvrir le dossier SVG-Generator
5Ã¨me Ã©tape : Modifiez le code src/utils/pb.ts de la faÃ§on suivante :

import PocketBase from 'pocketbase';
import type { TypedPocketBase } from "./pocketbase-types";
var path='';
if(import.meta.env.MODE === 'development')
    path = 'http://localhost:8090/'    //localhost = machine de dev
else path = 'http://localhost:8093/'   //localhost = machine de dÃ©ploiement
const pb = new PocketBase(path) as TypedPocketBase;
export default pb; 
6Ã¨me Ã©tape crÃ©er Ã  la racine du dossier le dossier .github
7Ã¨me Ã©tape : Dans le dossier .github crÃ©er le dossier workflows
8Ã¨me Ã©tape : Dans le dossier workflows ajouter un fichier deploy.yml
Ugo

 â€” Hier Ã  18:06
9Ã¨me Ã©tape : ajouter le code suivant dans deploy.yml :
name: Build and Deploy to VPS

on:
  push:
    branches: [main]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
    
name: Checkout code
    uses: actions/checkout@v4

    
name: Setup Node.js
    uses: actions/setup-node@v4
    with:
      node-version: '18'
      cache: 'npm'

    
name: Install dependencies
    run: npm ci
name: Build project
run: |
  npm run build
  cp package.json dist/server/
name: Deploy to VPS via SCP
uses: appleboy/scp-action@v0.1.3
with:
  host: ${{ secrets.HOST }}
  username: ${{ secrets.USER }}
  key: ${{ secrets.SSH_PRIVATE_KEY }}
  port: 22031
  source: "dist/*"
  target: "/var/www/colle-pratique/"
  strip_components: 1
  rm: false
  overwrite: true
  debug: true
name: Install production dependencies on VPS
uses: appleboy/ssh-action@v1.0.0
with:
  host: ${{ secrets.HOST }}
  username: ${{ secrets.USER }}
  key: ${{ secrets.SSH_PRIVATE_KEY }}
  port: 22031
  script: |
    cd /var/www/colle-pratique/server
    npm ci
    npm install astro
    npm install send server-destroy
    PORT=8085 pm2 restart colle-pratique || PORT=8085 pm2 start entry.mjs --name colle-pratique
10Ã¨me Ã©tape fais un commit nommÃ© : action github ajoutÃ©e 
11Ã¨me Ã©tape : fais un push 
VoilÃ  si tu suis bien ces Ã©tapes Ã§a devrait fonctionnÃ© 
Florian G â€” Hier Ã  18:18
Suis encore au taf je fais ca vers 21h
Merci pour le tuto
Ugo

 â€” Hier Ã  18:21
Ã‡a marche ne t'inquiÃ¨tes pas prends ton temps ce n'est pas grave je finirai demain
Florian G â€” Hier Ã  21:28
j'ai push il faut faire quoi maintenant?
Ugo

 â€” Hier Ã  22:34
Laisse comme Ã§a je verrai si Ã§a Ã  fonctionnÃ© demain matin
Florian G â€” Hier Ã  23:16
Ca roule merci
Ugo

 â€” 09:53
hello tu as du recevoir un sms pour que je puisse de nouveau me connecter Ã  github 
Florian G â€” 10:05
Yes
366917 is your GitHub authentication code.
Dsl de l'attente
Ugo

 â€” 10:07
pas grave tu as du en recevoir un nouveau car le dÃ©lai Ã©tait dÃ©passÃ©
Florian G â€” 10:07
799580 is your GitHub authentication code.
Ugo

 â€” 10:08
super merci
Ã§a a pas marchÃ© il me dit qu'il y a une erreur Ã  la ligne 14 de ton fichier deploy.yml
Image
Florian G â€” 10:15
Ca te dit ce que cest ?
Ugo

 â€” 10:17
oui en fait il manque des tirets quand j'ai mis le code dans discord Ã§a la tous niquÃ© attents je te le redone dans un fichier cette fois ci
Florian G â€” 10:17
Image
ah mince ok
Ugo

 â€” 10:19
tiens tu as juste Ã  copier collÃ© le code et Ã  le remplacer dans le deploy.yml ensuite tu refais un comit "action github ajoutÃ©e" puis un push
name: Build and Deploy to VPS

on:
  push:
    branches: [main]
Afficher plus
deploy.txt
2 Ko
Florian G â€” 10:23
merci
ï»¿
name: Build and Deploy to VPS

on:
  push:
    branches: [main]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'

    - name: Install dependencies
      run: npm ci
      
    - name: Build project
      run: |
        npm run build
        cp package.json dist/server/
    - name: Deploy to VPS via SCP
      uses: appleboy/scp-action@v0.1.3
      with:
        host: ${{ secrets.HOST }}
        username: ${{ secrets.USER }}
        key: ${{ secrets.SSH_PRIVATE_KEY }}
        port: 22031
        source: "dist/*"
        target: "/var/www/colle-pratique/"
        strip_components: 1
        rm: false
        overwrite: true
        debug: true
    - name: Install production dependencies on VPS
      uses: appleboy/ssh-action@v1.0.0
      with:
        host: ${{ secrets.HOST }}
        username: ${{ secrets.USER }}
        key: ${{ secrets.SSH_PRIVATE_KEY }}
        port: 22031
        script: |
          cd /var/www/colle-pratique/server
          npm ci
          npm install astro
          npm install send server-destroy
          PORT=8085 pm2 restart colle-pratique || PORT=8085 pm2 start entry.mjs --name colle-pratique
deploy.txt
2 Ko
